# 最高评分（整注）策略 - 快速参考

> **v1.2 更新**：现已支持大乐透！
> **v1.1 更新**：搜索参数现在只在"最高评分（整注）"策略时显示，候选池标签根据彩票类型动态更新。

## 🚀 快速开始

### 1. 启动GUI
```bash
python test_top_scored_generation.py
```

### 2. 基本使用（使用默认参数）

1. 切换到 **"号码推荐"** 标签页
2. 选择 **彩票类型**：双色球 或 大乐透
3. 设置 **生成注数**：5
4. 选择 **生成策略**：最高评分（整注）
5. 点击 **"生成号码"** 按钮
6. 等待结果（约20-40秒）

**支持的彩票类型**:
- ✅ 双色球 (SSQ): 6红球 + 1蓝球
- ✅ 大乐透 (DLT): 5前区 + 2后区

### 3. 自定义评分参数（仅双色球）

1. 切换到 **"号码评价"** 标签页
2. 找到 **"评分设置（双色球）"** 面板
3. 调整参数：
   - 蓝球频率权重：0.0-1.0（默认0.30）
   - 蓝球遗漏权重：0.0-1.0（默认0.30）
   - 遗漏曲线：linear 或 gaussian（默认linear）
   - σ系数：>0（默认1.0）
4. 返回 **"号码推荐"** 页，参数自动生效

**注意**: 大乐透目前使用 `DLTNumberEvaluator` 的默认评分参数。

---

## 📊 参数说明

### 搜索参数（在"号码推荐"页设置）

> **注意**：这些参数只在选择"最高评分（整注）"策略时显示和生效。

| 参数 | 范围 | 默认值 | 说明 |
|------|------|--------|------|
| 统计期数 | 10-500 | 100 | 统计窗口大小，越大越全面但越慢 |
| 候选池 | 10-30 | 18 | 候选池大小（双色球显示"红"，大乐透显示"前区"） |

### 评分参数（在"号码评价"页设置）

| 参数 | 范围 | 默认值 | 说明 |
|------|------|--------|------|
| 蓝球频率权重 | 0.0-1.0 | 0.30 | 蓝球在频率维度的权重 |
| 蓝球遗漏权重 | 0.0-1.0 | 0.30 | 蓝球在遗漏维度的权重 |
| 遗漏曲线 | linear/gaussian | linear | 遗漏评分曲线类型 |
| σ系数 | >0 | 1.0 | 高斯曲线的标准差系数 |

---

## ⚡ 性能参考

| 配置 | 耗时 | 适用场景 |
|------|------|----------|
| periods=50, pool=15 | 5-15秒 | 快速测试 |
| periods=100, pool=18 | 20-40秒 | 日常使用（推荐） |
| periods=200, pool=22 | 60-120秒 | 深度分析 |

---

## 🎯 推荐配置

### 配置1：平衡模式（默认）
```
统计期数: 100
候选池(红): 18
蓝球频率权重: 0.30
蓝球遗漏权重: 0.30
遗漏曲线: linear
```
**特点**：速度与质量平衡，适合日常使用

### 配置2：弱化近期偏好
```
统计期数: 100
候选池(红): 18
蓝球频率权重: 0.20
蓝球遗漏权重: 0.20
遗漏曲线: gaussian
σ系数: 1.5
```
**特点**：减少对近期号码的偏好，更注重长期规律

### 配置3：快速模式
```
统计期数: 50
候选池(红): 15
蓝球频率权重: 0.30
蓝球遗漏权重: 0.30
遗漏曲线: linear
```
**特点**：快速生成，适合快速测试

### 配置4：全面模式
```
统计期数: 200
候选池(红): 22
蓝球频率权重: 0.30
蓝球遗漏权重: 0.30
遗漏曲线: linear
```
**特点**：搜索更全面，但耗时较长

---

## 🔍 结果解读

### 示例输出
```
第 1 注: 红球: [11, 16, 17, 24, 28, 33] | 蓝球: 12 | 评分: 91.0
第 2 注: 红球: [9, 16, 17, 24, 28, 33] | 蓝球: 12 | 评分: 90.7
第 3 注: 红球: [11, 16, 17, 24, 28, 32] | 蓝球: 12 | 评分: 90.5
```

### 评分含义

- **评分范围**：0-100
- **评分越高**：表示该组合在当前评分规则下质量越好
- **评分维度**：
  - 频率分（25%）：号码出现频率的合理性
  - 遗漏分（25%）：号码遗漏期数的合理性
  - 模式分（25%）：奇偶比、大小比等模式特征
  - 独特性分（25%）：与历史中奖号码的差异度

### 评分差异

- **差异 >1.0**：质量有明显差异
- **差异 0.1-1.0**：质量接近，可能受蓝球影响
- **差异 <0.1**：质量相当，可视为并列

---

## 🛠️ 测试命令

### 自动化测试
```bash
python demo_top_scored_features.py
```
**输出**：
- ✅ 功能1验证通过：评分参数联动正常
- ✅ 功能2验证通过：搜索参数控件正常
- ✅ 功能3验证通过：评分显示正常
- ✅ 集成测试通过：完整流程正常

### 手动测试
```bash
python test_top_scored_generation.py
```
**操作**：按照屏幕提示进行手动测试

---

## ❓ 常见问题

### Q: 为什么生成速度慢？
**A**: 搜索算法需要评估大量组合。可以：
- 减小"统计期数"（如改为50）
- 减小"候选池(红)"（如改为15）
- 减少"生成注数"

### Q: 为什么看不到"统计期数"和"候选池"参数？
**A**: 这些参数只在选择"最高评分（整注）"策略时显示。切换到该策略后即可看到。

### Q: 评分参数显示为空？
**A**: 确保：
1. 先切换到"号码评价"页
2. 再返回"号码推荐"页
3. 选择"最高评分（整注）"策略

### Q: 如何理解"遗漏曲线"？
**A**:
- **linear**：越近期出现的号码评分越高
- **gaussian**：接近平均遗漏的号码评分越高

### Q: 蓝球权重设为0会怎样？
**A**: 蓝球将不参与评分，所有蓝球得分相同，可能导致结果中蓝球分布不均

### Q: 能否支持大乐透？
**A**: 目前仅支持双色球，大乐透支持需要额外开发

---

## 📚 相关文档

- [详细使用指南](./TOP_SCORED_GENERATION_GUIDE.md)
- [实现总结](./IMPLEMENTATION_SUMMARY.md)
- [评分系统说明](./EVALUATION_SYSTEM.md)

---

## 💡 小贴士

1. **首次使用**：建议使用默认参数，熟悉流程后再调整
2. **参数调整**：每次只调整一个参数，观察效果
3. **结果比较**：记录不同参数的结果，找到适合自己的配置
4. **评分理解**：评分只是参考，不代表中奖概率
5. **理性购彩**：彩票具有随机性，请理性对待

---

**版本**：v1.0  
**更新日期**：2025-10-23  
**状态**：✅ 已完成

