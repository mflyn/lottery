# 更新日志 - 大乐透支持

## v1.2 (2025-10-23)

### 🎉 重大更新：最高评分策略现已支持大乐透

#### 新增功能

1. **新增大乐透搜索脚本** (`scripts/find_top_dlt.py`)
   - 基于频率和遗漏分析构建高质量前区号码池
   - 应用大乐透特定的模式过滤器
   - 使用 `DLTNumberEvaluator` 进行全面评分
   - 排除历史完全匹配的号码组合
   - 支持命令行和 Python API 两种使用方式

2. **更新生成页面支持大乐透** (`src/gui/generation_frame.py`)
   - 移除"仅支持双色球"的限制
   - 添加彩票类型判断逻辑
   - 双色球和大乐透分别调用对应的搜索脚本
   - 自动适配不同的数据结构（red/blue vs front/back）

#### 测试

- ✅ 新增测试脚本 `test_dlt_support.py`
- ✅ 所有测试通过
- ✅ 成功搜索大乐透最高评分号码（评分90.3）

#### 文档

- ✅ 新增 `docs/DLT_SUPPORT_UPDATE.md` - 详细更新说明
- ✅ 更新 `docs/QUICK_REFERENCE.md` - 添加大乐透使用说明
- ✅ 新增 `CHANGELOG_DLT_SUPPORT.md` - 本文档

---

## 使用方法

### GUI 使用

```bash
python main.py
```

1. 切换到"号码推荐"标签页
2. 选择彩票类型：**大乐透**
3. 选择策略：**最高评分（整注）**
4. 设置生成注数和搜索参数
5. 点击"生成号码"

### 命令行使用

```bash
# 搜索大乐透最高评分号码
python scripts/find_top_dlt.py --top 5 --periods 100 --pool-size 20

# 保存结果到文件
python scripts/find_top_dlt.py --top 10 --periods 150 --pool-size 25 --out docs/TOP_DLT_NUMBERS.md
```

---

## 技术细节

### 大乐透模式过滤器

**前区过滤规则**:
- 奇偶比: 2-3 个奇数
- 大小比: 2-3 个大号（≥18）
- 区间覆盖: 至少覆盖2个区间（1-12, 13-24, 25-35）
- 跨度: 10-34
- 和值: 70-130
- AC值: ≥3

**后区**: 枚举所有2个号码的组合（C(12,2) = 66种）

### 性能优化

**启发式剪枝**:
- 全量搜索: C(35,5) × C(12,2) ≈ 25,000,000 种组合
- 剪枝搜索: C(20,5) × C(12,2) ≈ 102,000 种组合
- **减少99.6%的搜索空间**

---

## 参数建议

### 快速模式
- 统计期数: 50
- 候选池大小: 15
- 预计耗时: 5-10秒

### 平衡模式（推荐）
- 统计期数: 100
- 候选池大小: 20
- 预计耗时: 20-30秒

### 全面模式
- 统计期数: 150
- 候选池大小: 25
- 预计耗时: 60-90秒

---

## 双色球 vs 大乐透

| 特性 | 双色球 (SSQ) | 大乐透 (DLT) |
|------|-------------|-------------|
| 号码结构 | 6红球 + 1蓝球 | 5前区 + 2后区 |
| 红球/前区范围 | 1-33 | 1-35 |
| 蓝球/后区范围 | 1-16 | 1-12 |
| 评分参数联动 | ✅ 联动"号码评价"页 | ❌ 使用默认参数 |
| 搜索参数 | periods, pool_size | periods, pool_size |
| 候选池标签 | "候选池(红):" | "候选池(前区):" |

---

## 相关文件

### 新增文件
- `scripts/find_top_dlt.py` - 大乐透搜索脚本
- `test_dlt_support.py` - 大乐透支持测试脚本
- `docs/DLT_SUPPORT_UPDATE.md` - 详细更新说明
- `CHANGELOG_DLT_SUPPORT.md` - 本文档

### 修改文件
- `src/gui/generation_frame.py` - 添加大乐透支持
- `docs/QUICK_REFERENCE.md` - 更新使用说明

---

## 测试结果

```
======================================================================
                    测试总结
======================================================================

  测试1 - 大乐透搜索脚本: ✅ 通过
  测试2 - 生成页面支持: ✅ 通过

🎉 所有测试通过！最高评分策略现已支持大乐透
```

**示例结果**:
```
1. 前区: 08 11 22 26 35 | 后区: 04 12 | 评分: 90.3
2. 前区: 08 11 22 26 35 | 后区: 04 09 | 评分: 90.3
3. 前区: 08 11 22 26 35 | 后区: 04 10 | 评分: 90.3
```

---

## 下一步计划

- [ ] 为大乐透添加评分参数配置页面
- [ ] 优化搜索性能（并行计算、缓存等）
- [ ] 添加更多生成策略
- [ ] 支持更多彩票类型

---

**版本**: v1.2  
**日期**: 2025-10-23  
**状态**: ✅ 已完成并测试通过

